define(["Backbone","bootstrap","summernote","select2","bootstrap_slider","comment-box"],function(){console.log("inside zsAddShopexModalView");var a=Backbone.View.extend({el:"body",events:{},initialize:function(){function a(a){var b="<table class='procat-result'><tr>";return void 0!==a.image&&void 0!==a.image.thumbnail&&(b+="<td class='procat-image'><img src='"+a.image.thumbnail+"'/></td>"),b+="<td class='procat-info'><div class='procat-name'>"+a.name+"</div>",void 0!==a.critics_consensus?b+="<div class='procat-synopsis'>"+a.critics_consensus+"</div>":void 0!==a._id&&(b+="<div class='procat-synopsis'>"+a._id+"</div>"),b+="</td></tr></table>"}function b(a){return a.name}function e(a){return a.tag}function f(a){console.log(a)}function g(){req_data={};var a=$("#psc_box").select2("data");psarr=[];for(var b=0;b<a.length;++b)psarr.push(a[b]._id);req_data.psc_box=psarr;var c=$("#vendor_box").select2("data");sarr=[];for(var b=0;b<c.length;++b)sarr.push(c[b]._id);return req_data.vendor_box=sarr,req_data.month_box=$("#month_box").val(),req_data.year_box=$("#year_box").val(),req_data.prod_link=$(".prod-link").val(),req_data.areacode=$("#areacode").val(),req_data.content_text=$("#add_shopex_modal_content_text_editable").code(),req_data}function j(){$(h[i]).addClass("active"),pb_val=50*i+"%",$("#add-shopex-steps-pb").css("width",pb_val),1==i?($(".nextBtn").removeClass("hidden"),$(".prevBtn").addClass("hidden"),$(".submitBtn").addClass("hidden")):($(".nextBtn").addClass("hidden"),$(".prevBtn").removeClass("hidden"),$(".submitBtn").removeClass("hidden"))}$.fn.modal.Constructor.prototype.enforceFocus=function(){},$(".slider").slider({min:0,max:5,step:1,tooltip:"hide"}).on("slide",function(a){element=$(a.target).closest(".panel-body"),slider_val=a.value>0?a.value+".0":"N/A",element.find("h1").html(slider_val)}),console.log("zsAddShopexModalView initialized");var c=[{id:1,tag:"Jan"},{id:2,tag:"Feb"},{id:3,tag:"Mar"},{id:4,tag:"Apr"},{id:5,tag:"May"},{id:6,tag:"June"},{id:7,tag:"July"},{id:8,tag:"Aug"},{id:9,tag:"Sep"},{id:10,tag:"Oct"},{id:11,tag:"Nov"},{id:12,tag:"Dec"}],d=[{id:2014,tag:2014},{id:2013,tag:2013},{id:2012,tag:2012},{id:2011,tag:2012},{id:2010,tag:2010},{id:2009,tag:2009},{id:2008,tag:2008},{id:2007,tag:2007},{id:2006,tag:2006},{id:2005,tag:2005},{id:2004,tag:2004},{id:2003,tag:2003},{id:2002,tag:2002},{id:2001,tag:2001},{id:2e3,tag:2e3},{id:1999,tag:1999}];$("#month_box").select2({data:{results:c,text:"tag"},formatSelection:e,formatResult:e}),$("#year_box").select2({data:{results:d,text:"tag"},formatSelection:e,formatResult:e}),$(".add-more.add-more-prod-link").on("click",function(){return pli=$("#prod-link-input").clone(),$(".prod-link").append(pli),!1});var h=["dummy",".tab-pane.step1.add-shopex-modal",".tab-pane.step2.add-shopex-modal"],i=1;$(".nextBtn").on("click",function(){return console.log("nextBtn Clicked"),$(h[i]).removeClass("active"),i+=1,console.log("current tab pane",i),j(),!1}),$(".prevBtn").on("click",function(){return console.log("prevBtn Clicked"),$(h[i]).removeClass("active"),i-=1,console.log("current tab pane",i),j(),!1}),$(".submitBtn").on("click",function(){return console.log("submitBtn Clicked"),f(g()),!1}),$("#add_shopex_step_1").click(function(){return $(h[i]).removeClass("active"),i=1,j(),!1}),$("#add_shopex_step_2").click(function(){return $(h[i]).removeClass("active"),i=2,j(),!1}),$.fn.modal.Constructor.prototype.enforceFocus=function(){var a=this;$(document).on("focusin.modal",function(b){return $(b.target).hasClass("select2-input")?!0:(a.$element[0]===b.target||a.$element.has(b.target).length||a.$element.focus(),void 0)})},$("#psc_box").select2({maximumSelectionSize:3,minimumInputLength:2,multiple:!0,id:function(a){return{id:a._id}},ajax:{url:"/tags",dataType:"jsonp",quietMillis:100,data:function(a,b){return{q:a,page_limit:10,page:b,type:"product_cat"}},results:function(a,b){var c=10*b<a.total;return{results:a.results,more:c}}},formatResult:a,formatSelection:b,dropdownCssClass:"bigdrop"}),$("#vendor_box").select2({maximumSelectionSize:1,minimumInputLength:2,multiple:!0,id:function(a){return{id:a._id}},ajax:{url:"/tags",dataType:"jsonp",quietMillis:100,data:function(a,b){return{q:a,page_limit:10,page:b,type:"seller"}},results:function(a,b){var c=10*b<a.total;return{results:a.results,more:c}}},formatResult:a,formatSelection:b,dropdownCssClass:"bigdrop"}),this.$("#add_shopex_modal_content_text_editable").summernote({height:180,focus:!0,toolbar:[["style",["style"]],["style",["bold","italic","underline"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["insert",["picture","video","link"]]]})},render:function(){return console.log("in zsAddShopexModalView render function"),this}});return a});